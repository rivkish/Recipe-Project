<img src="../../assets/images/הורדה.png" class="logo">
<div class="addR" id="addDiv">
  <div style="position: relative; right: 5%;">
    <form (ngSubmit)="f.valid?addR():v()"  #f="ngForm">
<h1>הוספת מתכון</h1>

      <div class="mb-3"  id="nameR">
        <input type="text" style="margin-bottom: 10%;" class="form-control"  aria-describedby="emailHelp" required placeholder="שם מתכון: " [(ngModel)]="recipe.Name" name="namee">     
      </div> 
      <div class="line">
      <div class="mb-3">


        <mat-form-field appearance="fill">
          <mat-label>קטגוריה</mat-label>
          <mat-select [(ngModel)]="recipe.CategoryId " required name="nn">
            <mat-option *ngFor="let i of categorys" value="{{i.Id}}">
              {{i.Name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
       </div>
        <div class="mb-3">

          <td><mat-form-field class="example-full-width" appearance="fill">
            <mat-label>זמן הכנה</mat-label>
            <input matInput style="background-color: rgb(231, 231, 231);border-color:rgb(231, 231, 231) ;" required [(ngModel)]="recipe.PreparationTimeInMinute " name="nh6n">
          </mat-form-field></td>

   
        </div>   
      <div class="mb-3">


        <mat-form-field appearance="fill">
          <mat-label>רמת קושי</mat-label>
          <mat-select [(ngModel)]="recipe.Level " required name="nhn">
            <mat-option  value="1">קל</mat-option>
            <mat-option  value="2">בנוני</mat-option>
            <mat-option  value="3">קשה</mat-option>
          </mat-select>
        </mat-form-field>


       
      </div>
       <div class="mb-3">
       </div>
      </div>
      <h3>מצרכים</h3>
    <button type="button" mat-raised-button class="allr" (click)="numl()">הוסף שלב</button>
    <!-- <input type="button" ;" value="" (click)=numl() > -->
      
      
      <div *ngFor="let x of recipe.Layers; index as i">
       


       <input placeholder="שם שלב:" class="name" style="width: 20%;height: 4vh;; display: inline-block;"  type="text" [(ngModel)]="recipe.Layers[i].Description" name="l{{i}}" #l{{i}}="ngModel"> 
      <mat-icon aria-hidden="false" aria-label="Example home icon" [id]=i (click)="addC($event.target)">add_circle_outline</mat-icon>
<ng-container *ngFor="let l of x.Components; index as y;trackBy:trackByIdx">
      <input type="text" style="width: 20%;position: relative;right:4%;height: 4vh;" required class="name" placeholder="שם מצרך:" [(ngModel)]="recipe.Layers[i].Components[y]"  name="c{{i}}{{y}}" #c{{i}}{{y}}="ngModel">
    </ng-container> 
    </div>
    <h3>אופן ההכנה</h3>
    <mat-icon aria-hidden="false" aria-label="Example home icon"  (click)="addP()">add_circle_outline</mat-icon>

    <div *ngFor="let x of recipe.Preparation; index as i;trackBy:trackByIdx">
    <mat-form-field class="" appearance="fill" > <textarea matInput required [(ngModel)]="recipe.Preparation[i]" name="t{{i}}" #t{{i}}="ngModel"></textarea>
    </mat-form-field>
</div>


  
      <button type="submit" class="btn btn-dark" style="position: relative;right: 40%; margin-bottom: 3%;">הוספה</button>
      <div *ngIf="vv">
        הטופס לא תקין
      </div>
    </form></div></div>
  
<!-- {{recipe|json}} -->
<div *ngIf="ok1" class="sucss"><h1>
    המתכון נוסף בהצלחה!
</h1></div>
<div *ngIf="ok2"  class="erorr"><h1>
  אנא וודא שהינך מחובר </h1>
  <p (click)="login()"> לכניסה</p>
</div>